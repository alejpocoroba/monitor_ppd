numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(sexo = if_else(sexo == "as", "total", sexo))
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(sexo = if_else(sexo == "as", "total", sexo)) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as" ~ "Total",
str_detect("hom") ~ "Hombres",
str_detect("muj") ~ "Mujeres"
)
) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"
)
) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
unique(df_corto1$sexo)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"
)
) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(Total = sum(Total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(total = sum(total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(total = sum(total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
) %>%
arrange(desc(evento))
install.packages("kable")
knitr::opts_chunk$set(echo = FALSE)
# Paquetes
# Silenciar mensajes de .group en dplyr
options(dplyr.summarise.inform = FALSE)
# Librerías
require(pacman)
p_load(
readxl, tidyverse, dplyr, scales, zoo)
# Limpiar espacio de trabajo
rm(list=ls())
knitr::kable(df_corto1)
knitr::opts_chunk$set(echo = FALSE)
# Paquetes
# Silenciar mensajes de .group en dplyr
options(dplyr.summarise.inform = FALSE)
# Librerías
require(pacman)
p_load(
readxl, tidyverse, dplyr, scales, zoo)
# Limpiar espacio de trabajo
rm(list=ls())
# Funciones con direcciones de las carpetas
paste_out <- function(x){paste0("../03_datos_limpios/", x)}
paste_fig <- function(x){paste0("../04_figuras/"      , x)}
load(paste_out("df_monitor_amplio.Rdata"))
v_caption <- "Fuente: Elaboracón propia con datos del Monitor-PPD 2022"
# Homicidios por entidad
df_data2 <- df_monitor_amplio %>%
select(-c(id:sobre_la_nota), -enlace) %>%
filter(numero_de_homicidios_total>0) %>%
group_by(estado) %>%
summarise(homicidio_total = sum(numero_de_homicidios_total, na.rm = T)) %>%
drop_na()
ggplot(df_data2,
aes(x = reorder(estado, homicidio_total), y = homicidio_total)) +
# Geoms
geom_col() +
geom_text(aes(label = homicidio_total), vjust = +0.4, hjust = -0.2) +
coord_flip() +
# Etiqueta
labs(
title = "Homicidios en México",
subtitle = "Por estado de junio a agosto de 2022",
x = "Estado",
y = "Número de homicidios",
caption = v_caption) +
# Escalas
# Tema
theme_bw() +
theme(legend.position = "none")
# knitr::include_graphics(paste_fig("estados_homi.png"))
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(total = sum(total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
) %>%
arrange(desc(evento))
knitr::kable(df_corto1)
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(total = sum(total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
) %>%
arrange(desc(evento)) %>%
rename(Evento = evento)
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_",""))
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = everything(),
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = numero_de_homicidios_total:numero_de_detenidas_mujeres,
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total, numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_as_total, numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_as_total, numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = homicidios_total:detenidas_mujeres,
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total,
numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_total = numero_de_heridos_as_total,
numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_total = numero_de_detenidos_as_total,
numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = homicidios_total:detenidas_mujeres,
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
)
## Tablas----
df_corto1 <- df_monitor_amplio %>%
# variables de interés
select(numero_de_homicidios_total,
numero_de_homicidios_hombre,
numero_de_homicidios_mujer,
numero_de_heridos_total = numero_de_heridos_as_total,
numero_de_heridos_hombres,
numero_de_heridas_mujeres,
numero_de_detenidos_total = numero_de_detenidos_as_total,
numero_de_detenidos_hombres,
numero_de_detenidas_mujeres) %>%
summarize_all(~sum(., na.rm = T))   %>%
rename_all(~stringr::str_replace(.,"^numero_de_","")) %>%
pivot_longer(
cols = homicidios_total:detenidas_mujeres,
names_to = c("evento", "sexo"),
names_sep = "_",
values_to = "total"
) %>%
mutate(
# sexo = if_else(sexo == "as", "total", sexo)
sexo = case_when(
sexo == "as"    ~ "Total",
sexo == "total" ~ "Total",
str_detect(sexo, "hom") ~ "Hombres",
str_detect(sexo, "muj") ~ "Mujeres"),
evento = case_when(
str_detect(evento, "det") ~ "Detenidos(as)" ,
str_detect(evento, "her") ~ "Heridos(as)" ,
T ~ "Homicidios"
)
) %>%
group_by(evento, sexo) %>%
summarise(total = sum(total)) %>%
pivot_wider(
names_from = sexo,
values_from = total
) %>%
arrange(desc(evento))
