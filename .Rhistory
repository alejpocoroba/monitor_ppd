grupo_r  == "Gente Nuevo; Cártel de Sinaloa"  ~ "Los Salazar",
grupo_r  == "Los Chapos; Los Artistas Asesinos; Cártel de Sinaloa"  ~ "Cártel de Sinaloa / Los Chapitos",
grupo_r == grupo_r ~ grupo_r))
df_1r <- df_gcr1 %>%
select(estado, otros) %>%
rename(grupo_r = otros) %>%
drop_na()
df_2r <- df_gcr1 %>%
select(estado, otros2) %>%
rename(grupo_r = otros2) %>%
drop_na()
df_gcr2 <- df_gcr1 %>%
bind_rows(df_1r) %>%
bind_rows(df_2r) %>%
select(!c(otros, otros2)) %>%
rename(grupo = grupo_r)
# base gc + g_a + g_r
df_gc_full <- df_gc6 %>%
bind_rows(df_gca2) %>%
bind_rows(df_gcr2)
length(unique(df_gc_full$grupo))
# figura: mapa
# procesamiento
df_grupos <- df_gc_full %>%
# variables de interés
select(estado, grupo) %>%
group_by(estado, grupo) %>%
summarize(total_grupos = n()) %>%
drop_na(grupo) %>%
group_by(estado) %>%
summarize(total_grupos = n()) %>%
mutate(region = str_sub(estado, -2, -1)) %>%
left_join(mxstate.map)
# mapa
ggplot(
# Datos
df_grupos,
# Coordenadas
aes(long, lat, group = group, fill = total_grupos)) +
coord_map() +
geom_polygon(color = "black", size = .2, show.legend = T, alpha = 1) +
labs(title = "Presencia criminal en México",
subtitle = "Entre julio, agosto y septiembre del 2022\n",
fill = "Número",
caption = "Fuente: Monitor-PPD (2022)") +
theme(axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white",
colour = NA))
# 6. Autoridad-----------------------------------------------------------------
ggplot(
# Datos
homi_mapa,
# Coordenadas
aes(long, lat, group = group, fill = total_homicidios), size = 0, alpha = 0.9) +
coord_map() +
geom_polygon(color = "black", size = .2, show.legend = T, alpha = 1) +
labs(title = "Homicidios violentos en México",
subtitle = "De julio, agosto y septiembre del 2022\n",
fill = "Número de homicidios",
caption = "Fuente: Monitor-PPD (2022)") +
scale_fill_gradient(low = "white", high = "red", na.value = NA) +
theme(axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white", colour = NA))
ggplot(
# Datos
homi_mapa,
# Coordenadas
aes(long, lat, group = group, fill = total_homicidios), size = 0, alpha = 0.9) +
coord_map() +
geom_polygon(color = "black", size = .2, show.legend = T, alpha = 1) +
labs(title = "Homicidios violentos en México",
subtitle = "De julio, agosto y septiembre del 2022\n",
fill = "Número de homicidios",
caption = "Fuente: Monitor-PPD (2022)") +
scale_fill_gradient(low = "white", high = "#d62828", na.value = NA) +
theme(axis.line = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "white", colour = NA))
#------------------------------------------------------------------------------#
# Proyecto:                   Monitor PPD versión 2
# Objetivo:                   Reporte de desempeño: captura de notas
#
# Encargado:                  Alejandro Pocoroba
# Correo:                     alejandro.pocoroba@cide.edu
# Fecha de creación:          10 de noviembre de 2022
# Última actualización:       26 de enero de 2023
#------------------------------------------------------------------------------#
# Fuente: Monitor PPD versión 2
# 0. Configuración inicial -----------------------------------------------------
# Silenciar mensajes de .group en dplyr
options(dplyr.summarise.inform = FALSE)
# Librerías
require(pacman)
p_load(
readxl, tidyverse, dplyr, srvyr, zoo, ggtext, beepr)
# Limpiar espacio de trabajo
rm(list=ls())
# Funciones con direcciones de las carpetas
paste_inp <- function(x){paste0("02_datos_crudos/" , x)}
paste_out <- function(x){paste0("03_datos_limpios/", x)}
paste_fig <- function(x){paste0("04_figuras/"      , x)}
# 1. Cargar datos --------------------------------------------------------------
#junio
m1 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio1.xlsx"))
m2 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio2.xlsx"))
# julio
m3 <- read_xlsx(paste_inp("Monitor_PPD_julio.xlsx"))
# Agosto
m4 <- read_xlsx(paste_inp("Monitor_PPD_agosto1.xlsx"))
m5 <- read_xlsx(paste_inp("Monitor_PPD_agosto2.xlsx"))
m6 <- read_xlsx(paste_inp("Monitor_PPD_agosto3.xlsx"))
# Septiembre
m7 <- read_xlsx(paste_inp("Monitor_PPD_septiembre1.xlsx"))
m8 <- read_xlsx(paste_inp("Monitor_PPD_septiembre2.xlsx"))
#Octubre
m9 <- read_xlsx(paste_inp("Monitor_PPD_octubre.xlsx"))
# Noviembre
m10 <- read_xlsx(paste_inp("Monitor_PPD_noviembre.xlsx"))
# Diciembre
m11 <- read_xlsx(paste_inp("Monitor_PPD_diciembre.xlsx"))
# 2. Limpar datos --------------------------------------------------------------
df_j <- m1 %>%
rename("1.2.2) Enlace" = "1.2.1) Enlace",
"1.2.5) Nota complementaria/duplicada" = "1.2.5) Nota duplicada") %>%
mutate(
`1.2.6) Enlaces de notas complementaria/duplicada` =
paste(`1.2.6) Enlace de nota duplicada`, `1.2.6.1) Enlaces de notas duplicadas`,
sep = ";")) %>%
select(-c(`1.2.6) Enlace de nota duplicada`,
`1.2.6.1) Enlaces de notas duplicadas`))
# Bases que tienen valores ocultos de origen
m5 <- m5 %>%
filter(!is.na(Id))
m6 <- m6 %>%
filter(!is.na(Id))
# Se pegan todas las bases
df_pegada <- df_j %>% # base junio 1
bind_rows(m2) %>%   # base junio 2
bind_rows(m3) %>%   # base julio
bind_rows(m4) %>%   # base agosto 1
bind_rows(m5) %>%   # base agosto 2
bind_rows(m6) %>%   # base agosto 3
bind_rows(m7) %>%   # base septiembre 1
bind_rows(m8) %>%   # base septiembre 2
bind_rows(m9)       # base octubre
# limpiar nombres de microdatos
df_microdatos1 <- df_pegada %>%
janitor::clean_names() %>%
select("responsable" = "x1_1_responsable",
"publicacion" = "x1_2_1_fecha_de_publicacion",
"estado"      = "x1_3_3_estado")
# m10 y m11 tiene estructura diferente
df_microdatos2 <- m10 %>% # noviembre
janitor::clean_names() %>%
select("responsable" = "x1_1_responsable",
"publicacion" = "x1_2_1_fecha_de_publicacion",
"estado"      = "x1_3_3_estado")
df_microdatos4 <- m11 %>% # diciembre 19/01/23
janitor::clean_names() %>%
select("responsable" = "x1_1_responsable",
"publicacion" = "x1_2_1_fecha_de_publicacion",
"estado"      = "x1_3_3_estado")
# Se pagan las bases de junio a noviembre
df_microdatos3 <-  df_microdatos1 %>%
bind_rows(df_microdatos2)       %>%
bind_rows(df_microdatos4)       %>%
# modificaciones sobre fecha: mes
mutate(mes = lubridate::month(publicacion)) %>%
mutate(
id_entidad = str_extract_all(estado, "[:digit:]"))
# 3. Cifras de captura ---------------------------------------------------
## Periodo junio a noviembre----
# Total de observaciones
paste0("Número total de observaciones entre junio y diciembre de 2022: ", dim(df_microdatos3)[1])
# Total de obsveraciones por mes
table(df_microdatos3$mes)
# Total de observaciones por responsable
table(df_microdatos3$responsable)
# Porcentajes
# Porcentaje por responsable
df_responsable <- df_microdatos3 %>%
group_by(responsable) %>%
summarise(notas = n()) %>%
ungroup() %>%
mutate(
porcentaje = round(notas/sum(notas), 4),
porcentaje_text = scales::percent(porcentaje, accuracy = 0.01))
# Porcentje por responsable y mes
df_responsable_mes <- df_microdatos3 %>%
group_by(mes, responsable) %>%
summarise(notas = n()) %>%
ungroup() %>%
group_by(mes) %>%
mutate(
porcentaje = round(notas/sum(notas), 4),
porcentaje_text = scales::percent(porcentaje, accuracy = 0.01))
# Porcentaje por estado
df_entidad<- df_microdatos3 %>%
group_by(estado) %>%
summarise(notas = n()) %>%
ungroup() %>%
mutate(
porcentaje = round(notas/sum(notas), 4),
porcentaje_text = scales::percent(porcentaje, accuracy = 0.01))
#------------------------------------------------------------------------------#
# Proyecto:                   Monitor PPD
# Objetivo:                   Procesamiento de la información
#
# Encargado:                  Alejandro Pocoroba
# Correo:                     alejandro.pocoroba@cide.edu
# Fecha de creación:          25 de junio de 2022
# Última actualización:       25 de noviembre de 2022
#------------------------------------------------------------------------------#
# Fuente: Monitor PPD
# 0. Configuración inicial -----------------------------------------------------
# Silenciar mensajes de .group en dplyr
options(dplyr.summarise.inform = FALSE)
# Librerías
require(pacman)
p_load(
readxl, tidyverse, dplyr, srvyr, zoo, ggtext, beepr)
# Limpiar espacio de trabajo
rm(list=ls())
# Funciones con direcciones de las carpetas
paste_inp <- function(x){paste0("02_datos_crudos/" , x)}
paste_out <- function(x){paste0("03_datos_limpios/", x)}
paste_fig <- function(x){paste0("04_figuras/"      , x)}
# 1. Cargar datos --------------------------------------------------------------
#junio
m1 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio1.xlsx"))
m2 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio2.xlsx"))
# julio
m3 <- read_xlsx(paste_inp("Monitor_PPD_julio.xlsx"))
# Agosto
m4 <- read_xlsx(paste_inp("Monitor_PPD_agosto1.xlsx"))
m5 <- read_xlsx(paste_inp("Monitor_PPD_agosto2.xlsx"))
m6 <- read_xlsx(paste_inp("Monitor_PPD_agosto3.xlsx"))
# Septiembre
m7 <- read_xlsx(paste_inp("Monitor_PPD_septiembre1.xlsx"))
m8 <- read_xlsx(paste_inp("Monitor_PPD_septiembre2.xlsx"))
#Octubre
m9 <- read_xlsx(paste_inp("Monitor_PPD_octubre.xlsx"))
# 2. Limpar datos --------------------------------------------------------------
df_j <- m1 %>%
rename("1.2.2) Enlace" = "1.2.1) Enlace",
"1.2.5) Nota complementaria/duplicada" = "1.2.5) Nota duplicada") %>%
mutate(
`1.2.6) Enlaces de notas complementaria/duplicada` =
paste(`1.2.6) Enlace de nota duplicada`, `1.2.6.1) Enlaces de notas duplicadas`,
sep = ";")) %>%
select(-c(`1.2.6) Enlace de nota duplicada`,
`1.2.6.1) Enlaces de notas duplicadas`))
# Bases que tienen valores vacíos ocultos de origen
m5 <- m5 %>%
filter(!is.na(Id))
m6 <- m6 %>%
filter(!is.na(Id))
## 2.1. Pegar bases ------------------------------------------------------------
### 2.1.2 Verificar los nombres de las bases------------------------------------
### Base m1 tiene nombres de variables distintas al resto de las bases
colnames(df_j)
colnames(m2)
nom_ms <- colnames(df_j) %in% colnames(m2)
nom_ms2 <- colnames(m2) %in% colnames(df_j)
sum(nom_ms2)
table(nom_ms)
colnames(df_j)[!nom_ms]
colnames(m2)[!nom_ms2]
### 2.1.2 Pegar todas las bases-------------------------------------------------
df_1 <- df_j %>% # base junio 1
bind_rows(m2) %>% # base junio 2
bind_rows(m3) %>% # base julio
bind_rows(m4) %>% # base agosto 1
bind_rows(m5) %>% # base agosto 2
bind_rows(m6) %>% # base agosto 3
bind_rows(m7) %>% # base septiembre 1
bind_rows(m8) %>% # base septiembre 2
bind_rows(m9)     # base octubre
View(df_1)
df_2 <- df_1 %>%
janitor::clean_names() %>%
rename("datos_generales"      = "x1_datos_generales",
"responsable"          = "x1_1_responsable",
"sobre_la_nota"        = "x1_2_sobre_la_nota",
"fecha_de_publicacion" = "x1_2_1_fecha_de_publicacion",
"enlace"               = "x1_2_2_enlace",
"titulo_de_la_nota"    = "x1_2_3_titulo_de_la_nota",
"nombre_de_la_fuente"  = "x1_2_4_nombre_de_la_fuente",
"nota_complementaria_duplicada"= "x1_2_5_nota_complementaria_duplicada",
"enlaces_de_notas_complementaria_duplicada" = "x1_2_6_enlaces_de_notas_complementaria_duplicada",
"hechos"               = "x1_3_hechos",
"fecha_de_los_hechos"  = "x1_3_1_fecha_de_los_hechos",
"pais"                 = "x1_3_2_pais",
"estado"               = "x1_3_3_estado",
"municipio"            = "x1_3_4_municipio",
"lugar"                = "x1_3_5_lugar",
"grupos_criminales" = "x2_grupos_criminales",
"grupos_criminales_gc" = "x2_1_grupos_criminales_gc",
"nombre_del_grupo_criminal_gc" = "x2_1_1_nombre_del_grupo_criminal_gc",
"alianza_del_gc"       = "x2_1_2_alianza_del_gc",
"rival_del_gc"         =  "x2_1_3_rival_del_gc",
"actividades_delictivas" = "x3_actividades_delictivas",
"muertos"                = "x3_1_muertos",
"numero_de_homicidios_total" = "x3_1_1_numero_de_homicidios_total",
"numero_de_homicidios_hombre"= "x3_1_2_numero_de_homicidios_hombre",
"numero_de_homicidios_mujer" = "x3_1_3_numero_de_homicidios_mujer",
"pertenece_a" = "x3_1_4_pertenece_a",
"cuerpo_s_localizado_s" = "x3_1_5_cuerpo_s_localizado_s",
"victimas" = "x3_2_victimas",
"numero_de_heridos_as_total" = "x3_2_1_numero_de_heridos_as_total",
"numero_de_heridos_hombres" = "x3_2_2_numero_de_heridos_hombres",
"numero_de_heridas_mujeres" = "x3_2_3_numero_de_heridas_mujeres",
"herido_a_pertenece_a" = "x3_2_4_herido_a_pertenece_a",
"detenidos_as" = "x3_3_detenidos_as",
"numero_de_detenidos_as_total" = "x3_3_1_numero_de_detenidos_as_total",
"numero_de_detenidos_hombres" = "x3_3_2_numero_de_detenidos_hombres",
"numero_de_detenidas_mujeres" = "x3_3_3_numero_de_detenidas_mujeres",
"detenido_a_pertenece_a" = "x3_3_4_detenido_a_pertenece_a",
"ataque_armado_t" = "x3_4_ataque_armado",
"ataque_armado" = "x3_4_1_ataque_armado",
"otras_actividades_delictivas" = "x3_5_otras_actividades_delictivas",
"trafico" = "x3_5_1_trafico",
"privacion_de_la_libertad" = "x3_5_2_privacion_de_la_libertad",
"numero_de_personas_privadas_de_su_libertad" = "x3_5_2_1_numero_de_personas_privadas_de_su_libertad",
"narcomensaje" = "x3_5_3_narcomensaje",
"contenido_del_narcomensaje" = "x3_5_3_1_contenido_del_narcomensaje",
"otras_actividades_ilicitas" = "x3_5_4_otras_actividades_ilicitas",
"presencia_internacional" = "x3_5_5_presencia_internacional",
"presencia_no_violenta_t" = "x3_6_presencia_no_violenta",
"presencia_no_violenta" = "x3_6_1_presencia_no_violenta",
"instituciones_de_seguridad" = "x4_instituciones_de_seguridad",
"fuerzas_armadas" = "x4_1_fuerzas_armadas",
"autoridad_militar" = "x4_1_1_autoridad_militar",
"tipo_de_actividad_militar" = "x4_1_2_tipo_de_actividad_militar",
"fuerzas_de_seguridad" = "x4_2_fuerzas_de_seguridad",
"autoridad_civil" = "x4_2_1_autoridad_civil",
"tipo_de_actividad_civil" = "x4_2_2_tipo_de_actividad_civil",
"politica_de_seguridad_y_de_drogas" = "x5_politica_de_seguridad_y_de_drogas",
"politica_de_seguridad" = "x5_1_politica_de_seguridad",
"politica_de_drogas" = "x5_2_politica_de_drogas")
df_monitor_amplio <- df_2 %>%
filter(fecha_de_los_hechos >= '2022-06-01') %>%
filter(fecha_de_los_hechos <= '2022-11-01')
View(df_monitor_amplio)
View(df_2)
df_4 <- df_2 %>%
filter(fecha_de_los_hechos >= '2022-01-01') %>%
filter(fecha_de_los_hechos <= '2022-05-31')
View(df_4)
df_monitor_amplio <- df_2 %>%
filter(fecha_de_los_hechos >= '2022-06-01') %>%
filter(fecha_de_los_hechos <= '2022-10-01')
df_monitor_amplio <- df_2 %>%
filter(fecha_de_los_hechos >= '2022-06-01') %>%
filter(fecha_de_los_hechos <= '2022-11-01')
View(df_monitor_amplio)
df_monitor_amplio <- df_2 %>%
filter(fecha_de_los_hechos >= '2022-06-01') %>%
filter(fecha_de_los_hechos <= '2022-10-31')
df_monitor_amplio <- df_2 %>%
filter(fecha_de_publicacion >= '2022-06-01') %>%
filter(fecha_de_publicacion <= '2022-10-31')
View(df_monitor_amplio)
#------------------------------------------------------------------------------#
# Proyecto:                   Monitor PPD
# Objetivo:                   Procesamiento de la información
#
# Encargado:                  Alejandro Pocoroba
# Correo:                     alejandro.pocoroba@cide.edu
# Fecha de creación:          25 de junio de 2022
# Última actualización:       31 de enero de 2023
#------------------------------------------------------------------------------#
# Fuente: Monitor PPD
# 0. Configuración inicial -----------------------------------------------------
# Silenciar mensajes de .group en dplyr
options(dplyr.summarise.inform = FALSE)
# Librerías
require(pacman)
p_load(
readxl, tidyverse, dplyr, srvyr, zoo, ggtext, beepr)
# Limpiar espacio de trabajo
rm(list=ls())
# Funciones con direcciones de las carpetas
paste_inp <- function(x){paste0("02_datos_crudos/" , x)}
paste_out <- function(x){paste0("03_datos_limpios/", x)}
paste_fig <- function(x){paste0("04_figuras/"      , x)}
# 1. Cargar datos --------------------------------------------------------------
#junio
m1 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio1.xlsx"))
m2 <- read_xlsx(paste_inp("Monitor_junio/Monitor_PPD_junio2.xlsx"))
# julio
m3 <- read_xlsx(paste_inp("Monitor_PPD_julio.xlsx"))
# Agosto
m4 <- read_xlsx(paste_inp("Monitor_PPD_agosto1.xlsx"))
m5 <- read_xlsx(paste_inp("Monitor_PPD_agosto2.xlsx"))
m6 <- read_xlsx(paste_inp("Monitor_PPD_agosto3.xlsx"))
# Septiembre
m7 <- read_xlsx(paste_inp("Monitor_PPD_septiembre1.xlsx"))
m8 <- read_xlsx(paste_inp("Monitor_PPD_septiembre2.xlsx"))
#Octubre
m9 <- read_xlsx(paste_inp("Monitor_PPD_octubre.xlsx"))
# 2. Limpar datos --------------------------------------------------------------
df_j <- m1 %>%
rename("1.2.2) Enlace" = "1.2.1) Enlace",
"1.2.5) Nota complementaria/duplicada" = "1.2.5) Nota duplicada") %>%
mutate(
`1.2.6) Enlaces de notas complementaria/duplicada` =
paste(`1.2.6) Enlace de nota duplicada`, `1.2.6.1) Enlaces de notas duplicadas`,
sep = ";")) %>%
select(-c(`1.2.6) Enlace de nota duplicada`,
`1.2.6.1) Enlaces de notas duplicadas`))
# Bases que tienen valores vacíos ocultos de origen
m5 <- m5 %>%
filter(!is.na(Id))
m6 <- m6 %>%
filter(!is.na(Id))
## 2.1. Pegar bases ------------------------------------------------------------
### 2.1.2 Verificar los nombres de las bases------------------------------------
### Base m1 tiene nombres de variables distintas al resto de las bases
colnames(df_j)
colnames(m2)
nom_ms <- colnames(df_j) %in% colnames(m2)
nom_ms2 <- colnames(m2) %in% colnames(df_j)
sum(nom_ms2)
table(nom_ms)
colnames(df_j)[!nom_ms]
colnames(m2)[!nom_ms2]
### 2.1.2 Pegar todas las bases-------------------------------------------------
df_1 <- df_j %>% # base junio 1
bind_rows(m2) %>% # base junio 2
bind_rows(m3) %>% # base julio
bind_rows(m4) %>% # base agosto 1
bind_rows(m5) %>% # base agosto 2
bind_rows(m6) %>% # base agosto 3
bind_rows(m7) %>% # base septiembre 1
bind_rows(m8) %>% # base septiembre 2
bind_rows(m9)     # base octubre
## 2.2. Homologación de variables-----------------------------------------------
df_2 <- df_1 %>%
janitor::clean_names() %>%
rename("datos_generales"      = "x1_datos_generales",
"responsable"          = "x1_1_responsable",
"sobre_la_nota"        = "x1_2_sobre_la_nota",
"fecha_de_publicacion" = "x1_2_1_fecha_de_publicacion",
"enlace"               = "x1_2_2_enlace",
"titulo_de_la_nota"    = "x1_2_3_titulo_de_la_nota",
"nombre_de_la_fuente"  = "x1_2_4_nombre_de_la_fuente",
"nota_complementaria_duplicada"= "x1_2_5_nota_complementaria_duplicada",
"enlaces_de_notas_complementaria_duplicada" = "x1_2_6_enlaces_de_notas_complementaria_duplicada",
"hechos"               = "x1_3_hechos",
"fecha_de_los_hechos"  = "x1_3_1_fecha_de_los_hechos",
"pais"                 = "x1_3_2_pais",
"estado"               = "x1_3_3_estado",
"municipio"            = "x1_3_4_municipio",
"lugar"                = "x1_3_5_lugar",
"grupos_criminales" = "x2_grupos_criminales",
"grupos_criminales_gc" = "x2_1_grupos_criminales_gc",
"nombre_del_grupo_criminal_gc" = "x2_1_1_nombre_del_grupo_criminal_gc",
"alianza_del_gc"       = "x2_1_2_alianza_del_gc",
"rival_del_gc"         =  "x2_1_3_rival_del_gc",
"actividades_delictivas" = "x3_actividades_delictivas",
"muertos"                = "x3_1_muertos",
"numero_de_homicidios_total" = "x3_1_1_numero_de_homicidios_total",
"numero_de_homicidios_hombre"= "x3_1_2_numero_de_homicidios_hombre",
"numero_de_homicidios_mujer" = "x3_1_3_numero_de_homicidios_mujer",
"pertenece_a" = "x3_1_4_pertenece_a",
"cuerpo_s_localizado_s" = "x3_1_5_cuerpo_s_localizado_s",
"victimas" = "x3_2_victimas",
"numero_de_heridos_as_total" = "x3_2_1_numero_de_heridos_as_total",
"numero_de_heridos_hombres" = "x3_2_2_numero_de_heridos_hombres",
"numero_de_heridas_mujeres" = "x3_2_3_numero_de_heridas_mujeres",
"herido_a_pertenece_a" = "x3_2_4_herido_a_pertenece_a",
"detenidos_as" = "x3_3_detenidos_as",
"numero_de_detenidos_as_total" = "x3_3_1_numero_de_detenidos_as_total",
"numero_de_detenidos_hombres" = "x3_3_2_numero_de_detenidos_hombres",
"numero_de_detenidas_mujeres" = "x3_3_3_numero_de_detenidas_mujeres",
"detenido_a_pertenece_a" = "x3_3_4_detenido_a_pertenece_a",
"ataque_armado_t" = "x3_4_ataque_armado",
"ataque_armado" = "x3_4_1_ataque_armado",
"otras_actividades_delictivas" = "x3_5_otras_actividades_delictivas",
"trafico" = "x3_5_1_trafico",
"privacion_de_la_libertad" = "x3_5_2_privacion_de_la_libertad",
"numero_de_personas_privadas_de_su_libertad" = "x3_5_2_1_numero_de_personas_privadas_de_su_libertad",
"narcomensaje" = "x3_5_3_narcomensaje",
"contenido_del_narcomensaje" = "x3_5_3_1_contenido_del_narcomensaje",
"otras_actividades_ilicitas" = "x3_5_4_otras_actividades_ilicitas",
"presencia_internacional" = "x3_5_5_presencia_internacional",
"presencia_no_violenta_t" = "x3_6_presencia_no_violenta",
"presencia_no_violenta" = "x3_6_1_presencia_no_violenta",
"instituciones_de_seguridad" = "x4_instituciones_de_seguridad",
"fuerzas_armadas" = "x4_1_fuerzas_armadas",
"autoridad_militar" = "x4_1_1_autoridad_militar",
"tipo_de_actividad_militar" = "x4_1_2_tipo_de_actividad_militar",
"fuerzas_de_seguridad" = "x4_2_fuerzas_de_seguridad",
"autoridad_civil" = "x4_2_1_autoridad_civil",
"tipo_de_actividad_civil" = "x4_2_2_tipo_de_actividad_civil",
"politica_de_seguridad_y_de_drogas" = "x5_politica_de_seguridad_y_de_drogas",
"politica_de_seguridad" = "x5_1_politica_de_seguridad",
"politica_de_drogas" = "x5_2_politica_de_drogas")
df_monitor_amplio <- df_2 %>%
filter(fecha_de_publicacion >= '2022-06-01') %>%
filter(fecha_de_publicacion <= '2022-10-31') # octubre
openxlsx::write.xlsx(df_monitor_amplio, file = paste_out("Monitor_df_full.xlsx"), overwrite = T)
save(df_monitor_amplio, file = paste_out("df_monitor_amplio.Rdata"))
